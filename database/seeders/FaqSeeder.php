<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use App\Models\FaqCategory;
use App\Models\Faq;

class FaqSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Get Category IDs dynamically
        $categoryIds = FaqCategory::whereIn('name', ['الاتصال بنا', 'عن متجر AAM', 'الدعم والمساعدة'])
                                  ->pluck('id', 'name');

        if ($categoryIds->count() < 3) {
            $this->command->warn('One or more required FAQ Categories (الاتصال بنا, عن متجر AAM, الدعم والمساعدة) not found. Please run FaqCategorySeeder first.');
            return;
        }

        // Clear existing FAQs to avoid duplicates if re-seeding (optional)
        // Faq::truncate();

        // --- FAQs for 'الاتصال بنا' ---
        if (isset($categoryIds['الاتصال بنا'])) {
            $contactFaqs = [
                [
                    'question' => 'كيف يمكنني التواصل مع خدمة عملاء متجر AAM؟',
                    'answer' => '<p>يمكنك التواصل معنا بسهولة عبر الوسائل التالية:</p><ul><li><strong>البريد الإلكتروني:</strong> support@aamstore.com</li><li><strong>الهاتف:</strong> [أدخل رقم الهاتف هنا]</li><li><strong>نموذج الاتصال:</strong> عبر صفحة <a href="/contact">اتصل بنا</a> على موقعنا.</li></ul><p>فريقنا متاح لخدمتك من [أدخل ساعات العمل هنا، مثلاً: السبت إلى الخميس، من 9 صباحاً حتى 6 مساءً].</p>',
                    'display_order' => 10,
                ],
                [
                    'question' => 'ما هو الوقت المتوقع للرد على استفساري؟',
                    'answer' => '<p>نسعى جاهدين للرد على جميع الاستفسارات في أسرع وقت ممكن. عادةً ما يتم الرد خلال 24 ساعة عمل. في أوقات الذروة، قد يستغرق الأمر وقتاً أطول قليلاً.</p>',
                    'display_order' => 20,
                ],
                [
                    'question' => 'هل يوجد لديكم فروع أو متجر فعلي؟',
                    'answer' => '<p>حاليًا، يعمل متجر AAM كمتجر إلكتروني فقط لتوفير أفضل الأسعار والوصول لعملائنا في كل مكان. لا يوجد لدينا متجر فعلي للزيارة في الوقت الحالي.</p>', // Adjust if you have a physical store
                    'display_order' => 30,
                ],
                [
                    'question' => 'أنا تاجر وأرغب في الشراء بالجملة، هل هذا ممكن؟',
                    'answer' => '<p>نعم، نوفر خيارات للطلبات بالجملة والتجار. يرجى التواصل مع قسم المبيعات المخصص عبر البريد الإلكتروني: sales@aamstore.com لمناقشة التفاصيل والأسعار الخاصة.</p>',
                    'display_order' => 40,
                ],
                [
                    'question' => 'كيف يمكنني اقتراح شراكة أو تعاون مع متجر AAM؟',
                    'answer' => '<p>نحن منفتحون دائمًا على فرص الشراكة والتعاون المثمرة. يرجى إرسال تفاصيل مقترحك إلى قسم تطوير الأعمال على البريد الإلكتروني: partnerships@aamstore.com وسيقوم الفريق المختص بمراجعته.</p>',
                    'display_order' => 50,
                ],
            ];
            foreach ($contactFaqs as $faqData) {
                Faq::create(array_merge($faqData, ['faq_category_id' => $categoryIds['الاتصال بنا'], 'is_active' => true]));
            }
            $this->command->info("Seeded 5 FAQs for 'الاتصال بنا'.");
        }


        // --- FAQs for 'عن متجر AAM' ---
         if (isset($categoryIds['عن متجر AAM'])) {
             $aboutFaqs = [
                [
                    'question' => 'ما هو متجر AAM وماذا يقدم؟',
                    'answer' => '<p>متجر AAM هو منصتك الإلكترونية الرائدة المتخصصة في [اذكر مجال منتجاتك الرئيسي، مثلاً: الإلكترونيات الحديثة، مستلزمات المنزل العصرية، الأزياء الفريدة]. نسعى لتقديم منتجات عالية الجودة بأسعار تنافسية مع تجربة تسوق سهلة ومميزة.</p>',
                    'display_order' => 10,
                ],
                [
                    'question' => 'أين مقر متجر AAM؟',
                    'answer' => '<p>يقع مقر عملياتنا الرئيسي في [اذكر المدينة والدولة، مثلاً: دبي، الإمارات العربية المتحدة]. نقوم بالشحن والتوصيل إلى [اذكر مناطق التغطية، مثلاً: جميع أنحاء دول مجلس التعاون الخليجي].</p>',
                    'display_order' => 20,
                ],
                 [
                    'question' => 'هل المنتجات المعروضة في المتجر أصلية؟',
                    'answer' => '<p>نعم بكل تأكيد. نحن في متجر AAM نلتزم بتقديم منتجات أصلية 100% فقط من الموردين المعتمدين والعلامات التجارية مباشرة. نضمن جودة وأصالة كل منتج يتم بيعه عبر منصتنا.</p>',
                    'display_order' => 30,
                ],
                [
                    'question' => 'ما الذي يميز تجربة التسوق في متجر AAM؟',
                    'answer' => '<p>نتميز في متجر AAM بـ:</p><ul><li>تشكيلة واسعة ومنتقاة بعناية من المنتجات.</li><li>أسعار تنافسية وعروض مستمرة.</li><li>تجربة تصفح وشراء سهلة وآمنة.</li><li>خدمة عملاء سريعة ومتجاوبة.</li><li>توصيل سريع وموثوق.</li></ul>',
                    'display_order' => 40,
                ],
                 [
                    'question' => 'هل بياناتي الشخصية ومعلومات الدفع آمنة؟',
                    'answer' => '<p>نعم، أمان بياناتك هو أولويتنا القصوى. نستخدم أحدث تقنيات التشفير (مثل SSL) لحماية معلوماتك الشخصية ومعلومات الدفع. نحن لا نقوم بتخزين بيانات بطاقتك الائتمانية بالكامل على خوادمنا ونتبع أعلى معايير الأمان.</p>',
                    'display_order' => 50,
                ],
             ];
             foreach ($aboutFaqs as $faqData) {
                Faq::create(array_merge($faqData, ['faq_category_id' => $categoryIds['عن متجر AAM'], 'is_active' => true]));
             }
            $this->command->info("Seeded 5 FAQs for 'عن متجر AAM'.");
         }


        // --- FAQs for 'الدعم والمساعدة' ---
         if (isset($categoryIds['الدعم والمساعدة'])) {
             $supportFaqs = [
                [
                    'question' => 'كيف يمكنني تتبع حالة طلبي؟',
                    'answer' => '<p>بمجرد شحن طلبك، ستتلقى رسالة بريد إلكتروني تحتوي على رقم تتبع الشحنة ورابط لشركة الشحن. يمكنك أيضاً تسجيل الدخول إلى حسابك والذهاب إلى قسم <a href="/account/orders">"طلباتي"</a> لمتابعة حالة طلبك مباشرة.</p>',
                    'display_order' => 10,
                ],
                [
                    'question' => 'ما هي سياسة الإرجاع والاستبدال؟',
                    'answer' => '<p>يمكنك إرجاع أو استبدال معظم المنتجات خلال [أدخل عدد الأيام، مثلاً 14] يومًا من تاريخ الاستلام، بشرط أن تكون بحالتها الأصلية وغير مستخدمة. توجد بعض الاستثناءات لمنتجات معينة. يرجى مراجعة صفحة <a href="/returns-policy">سياسة الإرجاع والاستبدال</a> للحصول على كافة التفاصيل والشروط.</p>',
                    'display_order' => 20,
                ],
                [
                    'question' => 'لقد نسيت كلمة المرور، كيف يمكنني استعادتها؟',
                    'answer' => '<p>لا تقلق! اذهب إلى صفحة <a href="/login">تسجيل الدخول</a> وانقر على رابط "نسيت كلمة المرور؟". أدخل عنوان بريدك الإلكتروني المسجل لدينا وستصلك رسالة تحتوي على تعليمات لإعادة تعيين كلمة المرور الخاصة بك.</p>',
                    'display_order' => 30,
                ],
                [
                    'question' => 'ما هي طرق الدفع المتاحة في المتجر؟',
                    'answer' => '<p>نقبل طرق دفع متنوعة وآمنة لتسهيل عملية الشراء، تشمل:</p><ul><li>البطاقات الائتمانية (فيزا وماستركارد).</li><li>[أضف طرق دفع أخرى مثل مدى، آبل باي، جوجل باي، إلخ].</li><li>الدفع عند الاستلام (قد تتوفر في مناطق محددة وبرسوم إضافية).</li></ul><p>جميع طرق الدفع المتاحة لطلبك ستظهر لك بوضوح في صفحة الدفع.</p>',
                    'display_order' => 40,
                ],
                [
                    'question' => 'واجهت مشكلة أثناء عملية الدفع، ماذا أفعل؟',
                    'answer' => '<p>نأسف لسماع ذلك. يرجى التأكد أولاً من صحة بيانات الدفع التي أدخلتها وأن البطاقة صالحة وغير منتهية. قد تحتاج أيضاً للتحقق من رصيدك. إذا استمرت المشكلة، يمكنك تجربة طريقة دفع أخرى أو التواصل مباشرة مع <a href="/contact">خدمة العملاء</a> لمساعدتك فوراً.</p>',
                    'display_order' => 50,
                ],
             ];
              foreach ($supportFaqs as $faqData) {
                Faq::create(array_merge($faqData, ['faq_category_id' => $categoryIds['الدعم والمساعدة'], 'is_active' => true]));
              }
            $this->command->info("Seeded 5 FAQs for 'الدعم والمساعدة'.");
         }
    }
}